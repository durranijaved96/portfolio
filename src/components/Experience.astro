---
import Section from "./Section.astro";
import type { ExperienceProps } from "@types";

interface Props {
  experience: ExperienceProps[];
  linkedinUrl?: string;
}
const {
  experience = [],
  linkedinUrl = "https://www.linkedin.com/in/waqas-javed-durrani-aa3b34102/",
} = Astro.props as Props;

// Optional: detect if Vernaio exists (so we only show the banner when relevant)
const hasVernaio = experience.some((j) => j.company === "Vernaio GmbH");
---

<Section text="Experience" href="experience">
  <div class="space-y-6">
    {experience.map((job) => (
      <article
        class="rounded-2xl border border-black/10 dark:border-white/10
               bg-white/70 dark:bg-white/[0.03] backdrop-blur-md p-4 shadow-sm"
      >
        <header class="flex flex-wrap items-baseline justify-between gap-2">
          <h3 class="font-semibold">{job.company}</h3>
          <p class="text-sm text-slate-500 dark:text-slate-400">
            {job.startDate} — {job.endDate}
          </p>
        </header>
        <p class="mt-1 text-sm text-slate-600 dark:text-slate-300">{job.position}</p>

        {Array.isArray(job.summary) ? (
          <ul class="mt-3 list-disc pl-5 text-sm text-slate-700 dark:text-slate-300 space-y-1">
            {job.summary.map((s) => <li>{s}</li>)}
          </ul>
        ) : (
          <p class="mt-3 text-sm text-slate-700 dark:text-slate-300">{job.summary}</p>
        )}
      </article>
    ))}
  </div>

  {/* ⬇Separate banner outside the Vernaio card */}
  {hasVernaio && linkedinUrl && (
    <div
      class="mt-6 rounded-2xl border border-black/10 dark:border-white/10
             bg-white/80 dark:bg-white/[0.04] backdrop-blur-md
             shadow-sm"
      role="complementary"
      aria-label="More experience"
    >
      <a
        href={linkedinUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="flex items-center justify-center gap-2 px-4 py-3 text-sm
               hover:bg-black/5 dark:hover:bg-white/10 rounded-2xl transition"
        aria-label="View more experience on LinkedIn"
      >
        <!-- down chevron -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 opacity-80" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
        <span class="font-medium">To see more experience from last 10 years, click here to visit my LinkedIn profile</span>
      </a>
    </div>
  )}
</Section>
