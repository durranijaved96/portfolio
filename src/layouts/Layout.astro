---
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import { SITE_CONFIG } from "@config";

const {
  title,
  description,
  siteLogo,
  navLinks,
  lang,
  author,
  socialLinks,
  socialImage,
  canonicalURL = new URL(Astro.url.pathname, Astro.site).href,
} = SITE_CONFIG;

const ogImgUrl = canonicalURL + socialImage;
---

<!doctype html>
<html lang={lang} class="scroll-smooth antialiased">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="author" content={author} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>

    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:image" content={ogImgUrl} />
    <meta name="theme-color" content="#0ea5e9" />
  </head>

  <body
    class="
      min-h-dvh font-sans text-slate-900 bg-gradient-to-b
      from-slate-50 via-white to-slate-100
      dark:text-slate-100 dark:from-[#0b1020] dark:via-[#0e1326] dark:to-[#0b1020]
      selection:bg-cyan-300/50 dark:selection:bg-cyan-400/30
    "
  >
    <!-- Decorative gradient orbs -->
    <div aria-hidden="true" class="pointer-events-none fixed inset-0 -z-10">
      <div class="absolute -top-24 -left-24 h-72 w-72 rounded-full bg-cyan-400/20 blur-3xl dark:bg-cyan-300/15"></div>
      <div class="absolute -bottom-32 -right-24 h-96 w-96 rounded-full bg-indigo-400/15 blur-3xl dark:bg-indigo-300/10"></div>
    </div>

    <Header siteLogo={siteLogo} navLinks={navLinks} />

    <main class="mx-auto w-full max-w-6xl px-5 md:px-8 py-10 md:py-14">
      <slot />
    </main>

    <Footer author={author} socialLinks={socialLinks} />

    <!-- Dark mode bootstrapping -->
    <script is:inline>
      const saved = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (saved === 'dark' || (!saved && prefersDark)) {
        document.documentElement.classList.add('dark');
      }
    </script>
  </body>
</html>
